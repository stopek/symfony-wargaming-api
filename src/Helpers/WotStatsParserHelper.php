<?php

namespace App\Helpers;

use DOMDocument;
use Symfony\Contracts\HttpClient\HttpClientInterface;

class WotStatsParserHelper
{
    public static function tankJson(HttpClientInterface $client, string $url)
    {
//        $html = self::getDocument($client, $url);
//        $pattern = '/var json_data = ({.*});/';
//
//        preg_match($pattern, $html, $matches);
//        if (!isset($matches[1])) {
//            return [];
//        }
//
//        $data =  json_decode($matches[1], true);

        $data = json_decode('{"vehicle": {"info": {"id": 5137, "nation": "germany", "name": "G16_PzVIB_Tiger_II", "user_string": "Tiger II", "description": "As the Tiger I became less effective due to new Allied designs entering service, the Germans decided a new heavy tank was needed. Production was awarded to Henschel, who produced 489 vehicles utilizing the armor sloping and sharing parts with the Panther. The Pz. VI Ausf. B started production at the end of 1943 and first saw combat at the Battle of Normandy in July 1944. Dubbed the King or Royal Tiger by the Allies, it presented formidable armor and firepower, but early models were hampered by severe mechanical issues.", "type_slug": "heavyTank", "kinds": "regular", "level": 8, "price": 2450000, "is_premium": false, "in_shop": true, "xp_cost": 78000, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G16_PzVIB_Tiger_II/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G16_PzVIB_Tiger_II.png"}, "data": {"crew": ["commander", "gunner", "driver", "radioman", "loader"], "speed": {"forward": 38, "backward": 12}, "armory": [150, 100, 80, 80, 80, 40, 25, 40, 0, 25, 40], "radios": {"FuG5": {"index": 0, "level": 3, "price": 630, "weight": 50, "distance": 310, "is_premium": false, "max_health": 100, "user_string": "FuG 5", "stock": true}, "FuG7": {"index": 1, "level": 6, "price": 8160, "weight": 70, "distance": 415, "is_premium": false, "max_health": 120, "user_string": "FuG 7"}, "FuG12": {"index": 2, "level": 9, "price": 43200, "weight": 150, "distance": 710, "is_premium": false, "max_health": 150, "user_string": "FuG 12"}}, "weight": 32300, "chassis": {"PzVIB_Standardketten": {"index": 0, "level": 7, "price": 20080, "armory": [40, 40], "weight": 22350, "max_load": 69700, "is_premium": false, "max_health": 220, "user_string": "Tiger II Versuchs-Serie", "rotation_speed": 26, "terrain_resistance": [1.1, 1.3, 2.5], "stock": true}, "PzVIB_Vetstaerktketten": {"index": 1, "level": 8, "price": 37520, "armory": [40, 40], "weight": 22350, "max_load": 74000, "is_premium": false, "max_health": 240, "user_string": "Tiger II", "rotation_speed": 28, "terrain_resistance": [1, 1.2, 2.3]}}, "engines": {"Maybach_HL_210_TRM_P45": {"index": 0, "level": 7, "power": 650, "price": 35500, "weight": 750, "is_premium": false, "max_health": 200, "fire_chance": 0.2, "user_string": "Maybach HL 210 TRM P45", "stock": true}, "Maybach_HL_230_TRM_P45": {"index": 1, "level": 8, "power": 870, "price": 54000, "weight": 750, "is_premium": false, "max_health": 260, "fire_chance": 0.2, "user_string": "Maybach HL 230 TRM P45"}}, "turrets": {"PzVIB_Porsche_Turm": {"guns": {"_105mm_KwK45_L52": {"index": 1, "level": 8, "price": 116490, "shots": {"_105mm_Sprg_L": {"index": 2, "price": 650, "damage": 420, "caliber": 105, "is_premium": false, "user_string": "Sprgr L", "piercing_power": 60}, "_105mm_PzGr39L": {"index": 0, "price": 1030, "damage": 320, "caliber": 105, "is_premium": false, "user_string": "Pzgr 39 L", "piercing_power": 200}, "_105mm_Pzgr.40": {"index": 1, "price": 12, "damage": 320, "caliber": 105, "is_premium": true, "user_string": "Pzgr 40", "piercing_power": 244}}, "armory": [110, 80, 50, 50], "weight": 3000, "gun_rate": 5.5, "max_ammo": 42, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 180, "aiming_time": 2.3, "reload_time": 5.504587155963303, "user_string": "10,5 cm Kw.K. L/52", "gun_rate_mod": 5.5, "rotation_speed": 22, "shot_dispersion_radius": 0.37, "turrets": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"], "stock": false}, "_105mm_KwK46_L68": {"index": 2, "level": 9, "price": 178500, "shots": {"_105mm_Sprg_L": {"index": 2, "price": 650, "damage": 420, "caliber": 105, "is_premium": false, "user_string": "Sprgr L", "piercing_power": 60}, "_105mm_PzGr39L": {"index": 0, "price": 1030, "damage": 320, "caliber": 105, "is_premium": false, "user_string": "Pzgr 39 L", "piercing_power": 225}, "_105mm_Pzgr.40": {"index": 1, "price": 12, "damage": 320, "caliber": 105, "is_premium": true, "user_string": "Pzgr 40", "piercing_power": 285}}, "armory": [110, 80, 50, 50], "weight": 3600, "gun_rate": 5.5, "max_ammo": 42, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 190, "aiming_time": 2.3, "reload_time": 5.504587155963303, "user_string": "10,5 cm Kw.K. L/68", "gun_rate_mod": 5.5, "rotation_speed": 22, "shot_dispersion_radius": 0.34, "turrets": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"], "stock": false}, "_88mm_KwK_43_L71": {"index": 0, "level": 8, "price": 112180, "shots": {"_88mm_Sprg.43": {"index": 2, "price": 252, "damage": 295, "caliber": 88, "is_premium": false, "user_string": "Sprgr 43", "piercing_power": 44}, "_88mm_Pzgr39_43": {"index": 0, "price": 252, "damage": 240, "caliber": 88, "is_premium": false, "user_string": "Pzgr 39/43", "piercing_power": 203}, "_88mm_Pzgr.40_43": {"index": 1, "price": 11, "damage": 240, "caliber": 88, "is_premium": true, "user_string": "Pzgr 40/43", "piercing_power": 237}}, "armory": [110, 80, 50, 50], "weight": 2562, "gun_rate": 8.96, "max_ammo": 72, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 170, "aiming_time": 2.3, "reload_time": 8.955223880597014, "user_string": "8,8 cm Kw.K. 43 L/71", "gun_rate_mod": 8.96, "rotation_speed": 31, "shot_dispersion_radius": 0.34, "turrets": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"], "stock": true}}, "index": 0, "level": 8, "price": 28320, "armory": [100, 80, 80], "weight": 9638, "is_premium": false, "max_health": 320, "user_string": "Tiger II Turm Nr. 1-50", "vision_radius": 400, "rotation_speed": 27, "stock": true}, "PzVIB_Heinschel_Turm": {"guns": {"_105mm_KwK45_L52": {"index": 1, "level": 8, "price": 116490, "shots": {"_105mm_Sprg_L": {"index": 2, "price": 650, "damage": 420, "caliber": 105, "is_premium": false, "user_string": "Sprgr L", "piercing_power": 60}, "_105mm_PzGr39L": {"index": 0, "price": 1030, "damage": 320, "caliber": 105, "is_premium": false, "user_string": "Pzgr 39 L", "piercing_power": 200}, "_105mm_Pzgr.40": {"index": 1, "price": 12, "damage": 320, "caliber": 105, "is_premium": true, "user_string": "Pzgr 40", "piercing_power": 244}}, "armory": [185, 80, 60, 0], "weight": 3000, "gun_rate": 5.77, "max_ammo": 42, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 180, "aiming_time": 2.3, "reload_time": 5.769230769230769, "user_string": "10,5 cm Kw.K. L/52", "gun_rate_mod": 5.77, "rotation_speed": 22, "shot_dispersion_radius": 0.35, "stock": false}, "_105mm_KwK46_L68": {"index": 2, "level": 9, "price": 178500, "shots": {"_105mm_Sprg_L": {"index": 2, "price": 650, "damage": 420, "caliber": 105, "is_premium": false, "user_string": "Sprgr L", "piercing_power": 60}, "_105mm_PzGr39L": {"index": 0, "price": 1030, "damage": 320, "caliber": 105, "is_premium": false, "user_string": "Pzgr 39 L", "piercing_power": 225}, "_105mm_Pzgr.40": {"index": 1, "price": 12, "damage": 320, "caliber": 105, "is_premium": true, "user_string": "Pzgr 40", "piercing_power": 285}}, "armory": [185, 80, 60, 0], "weight": 3600, "gun_rate": 5.77, "max_ammo": 42, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 190, "aiming_time": 2.3, "reload_time": 5.769230769230769, "user_string": "10,5 cm Kw.K. L/68", "gun_rate_mod": 5.77, "rotation_speed": 22, "shot_dispersion_radius": 0.31, "stock": false}, "_88mm_KwK_43_L71": {"index": 0, "level": 8, "price": 112180, "shots": {"_88mm_Sprg.43": {"index": 2, "price": 252, "damage": 295, "caliber": 88, "is_premium": false, "user_string": "Sprgr 43", "piercing_power": 44}, "_88mm_Pzgr39_43": {"index": 0, "price": 252, "damage": 240, "caliber": 88, "is_premium": false, "user_string": "Pzgr 39/43", "piercing_power": 203}, "_88mm_Pzgr.40_43": {"index": 1, "price": 11, "damage": 240, "caliber": 88, "is_premium": true, "user_string": "Pzgr 40/43", "piercing_power": 237}}, "armory": [185, 80, 60, 0], "weight": 2562, "gun_rate": 8.96, "max_ammo": 72, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 170, "aiming_time": 2.3, "reload_time": 8.955223880597014, "user_string": "8,8 cm Kw.K. 43 L/71", "gun_rate_mod": 8.96, "rotation_speed": 31, "shot_dispersion_radius": 0.34, "stock": false}}, "index": 1, "level": 9, "price": 52370, "armory": [185, 80, 80], "weight": 10938, "is_premium": false, "max_health": 420, "user_string": "Tiger II Serienturm", "vision_radius": 400, "rotation_speed": 27, "stock": false}}, "fuelTanks": {"Large": {"index": 0, "price": 100, "weight": 300, "is_premium": false, "max_health": 200}}, "max_health": 1280, "invisibility": {"still": 0.075, "moving": 0.038}, "free_xp_bonus": "0.05", "primary_armory": [150, 80, 80], "is_fake_turrets": false, "battle_level_max": 10, "unlockPointsData": {"maxXP": "274500", "version": "2", "unlockPoints": {"unlock": [{"id": "1", "upgrade": {"item": "vehicleGun:_105mm_KwK45_L52"}, "xpRequirement": "20000"}, {"id": "2", "upgrade": {"item": "vehicleRadio:FuG7"}, "xpRequirement": "25000"}, {"id": "3", "upgrade": {"item": "vehicleEngine:Maybach_HL_230_TRM_P45"}, "xpRequirement": "37000"}, {"id": "4", "upgrade": {"item": "vehicleChassis:PzVIB_Vetstaerktketten"}, "xpRequirement": "56000"}, {"id": "5", "upgrade": {"item": "vehicleTurret:PzVIB_Heinschel_Turm"}, "xpRequirement": "76500"}, {"id": "6", "upgrade": {"item": "vehicleRadio:FuG12"}, "xpRequirement": "83500"}, {"id": "7", "upgrade": {"item": "vehicleGun:_105mm_KwK46_L68"}, "xpRequirement": "120500"}, {"id": "8", "upgrade": {"item": "vehicle:G55_E-75"}, "xpRequirement": "274500"}]}}}, "tree": [{"vehicle": {"id": 1297, "nation": "germany", "name": "G03_PzV_Panther", "user_string": "Panther", "description": "This famous tank was produced from January 1943 through April 1945, with a total of 5,796 vehicles built plus eight vehicles built on the F series chassis.", "type_slug": "mediumTank", "kinds": "regular", "level": 7, "price": 1380000, "is_premium": false, "in_shop": true, "xp_cost": 53000, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G03_PzV_Panther/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G03_PzV_Panther.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G03_PzV_Panther_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G03_PzV_Panther_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G03_PzV_Panther.png"}, "to_vehicle": {"id": 5137, "nation": "germany", "name": "G16_PzVIB_Tiger_II", "user_string": "Tiger II", "description": "As the Tiger I became less effective due to new Allied designs entering service, the Germans decided a new heavy tank was needed. Production was awarded to Henschel, who produced 489 vehicles utilizing the armor sloping and sharing parts with the Panther. The Pz. VI Ausf. B started production at the end of 1943 and first saw combat at the Battle of Normandy in July 1944. Dubbed the King or Royal Tiger by the Allies, it presented formidable armor and firepower, but early models were hampered by severe mechanical issues.", "type_slug": "heavyTank", "kinds": "regular", "level": 8, "price": 2450000, "is_premium": false, "in_shop": true, "xp_cost": 78000, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G16_PzVIB_Tiger_II/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G16_PzVIB_Tiger_II.png"}}, {"vehicle": {"id": 529, "nation": "germany", "name": "G04_PzVI_Tiger_I", "user_string": "Tiger I", "description": "Development of the Tiger I was started in 1937 by the Henschel company. Mass production began in 1942, with an eventual total of 1,354 vehicles manufactured. The tank first saw combat in the fight for Leningrad, and Tigers were at the forefront of battles from Tunisia to Kursk. Although production was discontinued in the summer of 1944, the Tiger I continued to see action until the end of the war.", "type_slug": "heavyTank", "kinds": "regular", "level": 7, "price": 1390000, "is_premium": false, "in_shop": true, "xp_cost": 25120, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G04_PzVI_Tiger_I/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G04_PzVI_Tiger_I.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G04_PzVI_Tiger_I_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G04_PzVI_Tiger_I_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G04_PzVI_Tiger_I.png"}, "to_vehicle": {"id": 5137, "nation": "germany", "name": "G16_PzVIB_Tiger_II", "user_string": "Tiger II", "description": "As the Tiger I became less effective due to new Allied designs entering service, the Germans decided a new heavy tank was needed. Production was awarded to Henschel, who produced 489 vehicles utilizing the armor sloping and sharing parts with the Panther. The Pz. VI Ausf. B started production at the end of 1943 and first saw combat at the Battle of Normandy in July 1944. Dubbed the King or Royal Tiger by the Allies, it presented formidable armor and firepower, but early models were hampered by severe mechanical issues.", "type_slug": "heavyTank", "kinds": "regular", "level": 8, "price": 2450000, "is_premium": false, "in_shop": true, "xp_cost": 78000, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G16_PzVIB_Tiger_II/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G16_PzVIB_Tiger_II.png"}}, {"vehicle": {"id": 5137, "nation": "germany", "name": "G16_PzVIB_Tiger_II", "user_string": "Tiger II", "description": "As the Tiger I became less effective due to new Allied designs entering service, the Germans decided a new heavy tank was needed. Production was awarded to Henschel, who produced 489 vehicles utilizing the armor sloping and sharing parts with the Panther. The Pz. VI Ausf. B started production at the end of 1943 and first saw combat at the Battle of Normandy in July 1944. Dubbed the King or Royal Tiger by the Allies, it presented formidable armor and firepower, but early models were hampered by severe mechanical issues.", "type_slug": "heavyTank", "kinds": "regular", "level": 8, "price": 2450000, "is_premium": false, "in_shop": true, "xp_cost": 78000, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G16_PzVIB_Tiger_II/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G16_PzVIB_Tiger_II_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G16_PzVIB_Tiger_II.png"}, "to_vehicle": {"id": 9745, "nation": "germany", "name": "G55_E-75", "user_string": "E 75", "description": "In 1945, the E 75 was conceived as a standard heavy tank of the Panzerwaffe to replace the Tiger II. It existed only in blueprints.", "type_slug": "heavyTank", "kinds": "regular", "level": 9, "price": 3480000, "is_premium": false, "in_shop": true, "xp_cost": 154000, "alliance": null, "era": "wwii", "url": "/en/encyclopedia/vehicles/germany/G55_E-75/", "image_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G55_E-75.png", "image_contour_url": "https://wxpcdn-cbprodretail.gcdn.co/static/71efdfd/tankopedia/img/common_vehicle_contour.svg", "image_preview_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G55_E-75_preview.png", "image_profile_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/G55_E-75_profile.png", "image_techtree_url": "https://wxpcdn-cbprodretail.gcdn.co/dcont/tankopedia/germany/tech_tree/G55_E-75.png"}}], "unlock_progression": {"engines": [{"level": 0, "name": "Maybach_HL_210_TRM_P45", "index": 0}, {"level": 3, "name": "Maybach_HL_230_TRM_P45"}], "chassis": [{"level": 0, "name": "PzVIB_Standardketten", "index": 0}, {"level": 4, "name": "PzVIB_Vetstaerktketten"}], "radios": [{"level": 0, "name": "FuG5", "index": 0}, {"level": 2, "name": "FuG7"}, {"level": 6, "name": "FuG12"}], "guns": [{"level": 0, "name": "_88mm_KwK_43_L71", "index": 0, "turret_names": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"]}, {"level": 1, "name": "_105mm_KwK45_L52", "turret_names": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"]}, {"level": 7, "name": "_105mm_KwK46_L68", "turret_names": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"]}], "turrets": [{"level": 0, "name": "PzVIB_Porsche_Turm", "index": 0, "gun_names": ["_105mm_KwK45_L52", "_105mm_KwK46_L68", "_88mm_KwK_43_L71"]}, {"level": 5, "name": "PzVIB_Heinschel_Turm", "gun_names": ["_105mm_KwK45_L52", "_105mm_KwK46_L68", "_88mm_KwK_43_L71"]}]}, "guns": {"_105mm_KwK45_L52": {"index": 1, "level": 8, "price": 116490, "shots": {"_105mm_Sprg_L": {"index": 2, "price": 650, "damage": 420, "caliber": 105, "is_premium": false, "user_string": "Sprgr L", "piercing_power": 60}, "_105mm_PzGr39L": {"index": 0, "price": 1030, "damage": 320, "caliber": 105, "is_premium": false, "user_string": "Pzgr 39 L", "piercing_power": 200}, "_105mm_Pzgr.40": {"index": 1, "price": 12, "damage": 320, "caliber": 105, "is_premium": true, "user_string": "Pzgr 40", "piercing_power": 244}}, "armory": [110, 80, 50, 50], "weight": 3000, "gun_rate": 5.5, "max_ammo": 42, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 180, "aiming_time": 2.3, "reload_time": 5.504587155963303, "user_string": "10,5 cm Kw.K. L/52", "gun_rate_mod": 5.5, "rotation_speed": 22, "shot_dispersion_radius": 0.37, "turrets": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"], "stock": false}, "_105mm_KwK46_L68": {"index": 2, "level": 9, "price": 178500, "shots": {"_105mm_Sprg_L": {"index": 2, "price": 650, "damage": 420, "caliber": 105, "is_premium": false, "user_string": "Sprgr L", "piercing_power": 60}, "_105mm_PzGr39L": {"index": 0, "price": 1030, "damage": 320, "caliber": 105, "is_premium": false, "user_string": "Pzgr 39 L", "piercing_power": 225}, "_105mm_Pzgr.40": {"index": 1, "price": 12, "damage": 320, "caliber": 105, "is_premium": true, "user_string": "Pzgr 40", "piercing_power": 285}}, "armory": [110, 80, 50, 50], "weight": 3600, "gun_rate": 5.5, "max_ammo": 42, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 190, "aiming_time": 2.3, "reload_time": 5.504587155963303, "user_string": "10,5 cm Kw.K. L/68", "gun_rate_mod": 5.5, "rotation_speed": 22, "shot_dispersion_radius": 0.34, "turrets": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"], "stock": false}, "_88mm_KwK_43_L71": {"index": 0, "level": 8, "price": 112180, "shots": {"_88mm_Sprg.43": {"index": 2, "price": 252, "damage": 295, "caliber": 88, "is_premium": false, "user_string": "Sprgr 43", "piercing_power": 44}, "_88mm_Pzgr39_43": {"index": 0, "price": 252, "damage": 240, "caliber": 88, "is_premium": false, "user_string": "Pzgr 39/43", "piercing_power": 203}, "_88mm_Pzgr.40_43": {"index": 1, "price": 11, "damage": 240, "caliber": 88, "is_premium": true, "user_string": "Pzgr 40/43", "piercing_power": 237}}, "armory": [110, 80, 50, 50], "weight": 2562, "gun_rate": 8.96, "max_ammo": 72, "elevation": 15, "depression": 8, "is_premium": false, "max_health": 170, "aiming_time": 2.3, "reload_time": 8.955223880597014, "user_string": "8,8 cm Kw.K. 43 L/71", "gun_rate_mod": 8.96, "rotation_speed": 31, "shot_dispersion_radius": 0.34, "turrets": ["PzVIB_Porsche_Turm", "PzVIB_Heinschel_Turm"], "stock": true}}}, "nations": {"ussr": "U.S.S.R.", "usa": "U.S.A.", "france": "France", "germany": "Germany", "uk": "U.K.", "japan": "Japan", "china": "China", "czech": "Czechoslovakia", "sweden": "Sweden", "poland": "Poland", "merc": "Mercenaries", "italy": "Italy", "xn": "Miscellaneous"}, "vehicle_types": {"lightTank": "Light Tank", "mediumTank": "Medium Tank", "heavyTank": "Heavy Tank", "AT-SPG": "Tank Destroyer", "SPG": "Artillery"}, "vehicle_limits": {"damage": [8, 2250], "enginePower": [38.0, 1750.0], "shotDispersionRadius": [0.24, 1.2], "aimingTime": [1.14285714285714, 8.8], "armorPenetration": [10.0, 999.0], "turretTraverseSpeed": [8.0, 125.0], "rateOfFire": [1.17, 199.45], "gun": [7.92, 240.0], "speedLimit": [12.0, 80.0], "viewRange": [240, 420], "traverseSpeed": [12.0, 1350.0], "ammunition": [12, 1800]}}', true);
        return $data['vehicle'] ?? [];
    }

    public static function getTanksLinks(HttpClientInterface $client, string $url): array
    {
        $html = self::getDocument($client, $url);

        $dom = new DOMDocument;
        @$dom->loadHTML($html);

        $links = $dom->getElementsByTagName('a');

        $output = [];

        foreach ($links as $link) {
            if (!str_starts_with($link->getAttribute('href'), '/en/encyclopedia/vehicles')) {
                continue;
            }

            if (!preg_match('/^\/en\/encyclopedia\/vehicles\/([a-zA-Z0-9_]+)\//', $link->getAttribute('href'))) {
                continue;
            }

            $output[] = [
                'link' => $link->getAttribute('href'),
                'title' => preg_replace('/\s+/', ' ', preg_replace("/\r|\n/", "", $link->nodeValue))
            ];
        }

        return $output;
    }

    private static function getDocument(HttpClientInterface $client, $url): string
    {
        $response = $client->request(
            'GET',
            $url
        );

        return $response->getContent();
    }
}